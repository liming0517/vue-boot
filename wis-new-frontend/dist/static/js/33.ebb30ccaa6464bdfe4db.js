webpackJsonp([33],{792:function(e,t,n){var i=n(17)(n(840),n(855),null,null,null);e.exports=i.exports},840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{deptCode:null,menuLoading:!1,menuVisible:!1,formMenuSubmiting:!1,menuData:[],expandedKeys:[],checkedKeys:[],defaultProps:{children:"children",label:"title"}}},methods:{getDeptMenu:function(e){var t=this;this.menuVisible=!0,this.menuLoading=!0,this.deptCode=e,this.$api.system.department.listmenu({data:{deptCode:this.deptCode}}).then(function(e){t.checkedKeys=e.data.data.checkedKeys,t.expandedKeys=e.data.data.expandedKeys,t.menuData=e.data.data.list,t.menuLoading=!1,console.log(e.data)}).catch(function(e){t.menuLoading=!1,console.log(e)})},commitMenuForm:function(){var e=this;this.formMenuSubmiting=!0,this.$api.system.department.save({data:{deptCode:this.deptCode,resourceType:0,resource_list:this.$refs.tree.getCheckedKeys()}}).then(function(t){e.formMenuSubmiting=!1,e.menuVisible=!1,e.$notify({title:"成功",message:"保存成功",type:"success",duration:1500})}).catch(function(t){e.formMenuSubmiting=!1,e.$notify({title:"错误",message:t,type:"error",duration:3e3}),console.log(t)})}}}},855:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading.body",value:e.menuLoading,expression:"menuLoading",modifiers:{body:!0}}],attrs:{title:"部门菜单管理",visible:e.menuVisible,"element-loading-text":"玩命加载中"},on:{"update:visible":function(t){e.menuVisible=t}}},[n("el-tree",{ref:"tree",attrs:{data:e.menuData,"show-checkbox":"","node-key":"id","default-expanded-keys":e.expandedKeys,"default-checked-keys":e.checkedKeys,props:e.defaultProps}}),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.menuVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"warning",loading:e.formMenuSubmiting},on:{click:e.commitMenuForm}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=33.ebb30ccaa6464bdfe4db.js.map
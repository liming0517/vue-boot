webpackJsonp([17],{808:function(e,t,a){function l(e){a(930)}var s=a(17)(a(886),a(956),l,null,null);e.exports=s.exports},823:function(e,t,a){"use strict";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"记录",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"永久删除";return new i.a(function(l,s){n.MessageBox.confirm("此操作将"+t+e+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l()}).catch(function(){a.i(n.Message)({type:"info",message:"已取消此操作"})})})}t.a=l;var s=a(82),i=a.n(s),n=a(111);a.n(n)},886:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(301),s=a.n(l),i=(a(112),a(823));t.default={data:function(){return{tableColumShow:!1,selectedRow:null,stateArr:[{value:"0",label:"无效"},{value:"1",label:"有效"}],tableQuery:{limit:10,currentPage:1,smc_Model:null,smc_Version:null,smc_CreateUser:null,smc_CreateTimeStart:null,smc_CreateTimeEnd:null},querySubmiting:!1,formSubmiting:!1,queryForm:!1,total:0,tableData:[],tableLoading:!1,createForm:!1,createdItem:{smc_State:null,smc_Content:null,smc_Model:null,smc_Operate:null,smc_URL:null,smc_Version:null,smc_Notifiedlist:[]},roleQuery:{limit:1e3,currentPage:1,operate_Model:null},roleData:null,operatList:null,modelList:null}},methods:{getApplyList:function(){var e=this;this.selectedRow=null,this.tableLoading=!0,this.$api.message.messageconfig.list({data:this.tableQuery}).then(function(t){e.total=t.data.data.total,e.tableData=t.data.data.list,e.queryForm=!1,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1,console.log(t)})},modelChange:function(){this.roleQuery.operate_Model=this.createdItem.smc_Model,this.getOperatelist()},showInfo:function(e){"edit"==e?null==this.selectedRow?this.$notify({title:"提示",message:"请选择一条数据！",type:"warning",duration:2e3}):(this.roleQuery.operate_Model=this.selectedRow.smc_Model,this.getOperatelist(),this.createdItem.smc_Code=this.selectedRow.smc_Code,this.createdItem.smc_State=this.selectedRow.smc_State,this.createdItem.smc_Content=this.selectedRow.smc_Content,this.createdItem.smc_Model=this.selectedRow.smc_Model,this.createdItem.smc_Operate=this.selectedRow.smc_Operate,this.createdItem.smc_URL=this.selectedRow.smc_URL,this.createdItem.smc_Version=this.selectedRow.smc_Version,this.createdItem.smc_Notifiedlist=s()(this.selectedRow.notifiedlist).map(function(e){return parseInt(e)}),this.createForm=!0):"create"==e&&(this.clearEditDialog(),this.createForm=!0)},clearEditDialog:function(){this.createdItem.smc_Code=null,this.createdItem.smc_State=null,this.createdItem.smc_Content=null,this.createdItem.smc_Model=null,this.createdItem.smc_URL=null,this.createdItem.smc_Operate=null,this.createdItem.smc_Version=null,this.createdItem.smc_Notifiedlist=[]},deleteConf:function(){var e=this;if(null==this.selectedRow)return void this.$notify({title:"提示",message:"请选择一条数据！",type:"warning",duration:2e3});a.i(i.a)("此配置").then(function(){e.$api.message.messageconfig.delete({data:e.selectedRow}).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:1500}),e.getApplyList(),e.selectedRow=null}).catch(function(t){e.formSubmiting=!1,e.$notify({title:"错误",message:t,type:"error",duration:3e3}),console.log(t)})})},saveClassInfo:function(){var e=this;return null==this.createdItem.smc_Content||""==this.createdItem.smc_Content?void this.$notify({title:"提示",message:"请填写通知内容",type:"warning",duration:1500}):null==this.createdItem.smc_Model||""==this.createdItem.smc_Model?void this.$notify({title:"提示",message:"请选择关联模块",type:"warning",duration:1500}):null==this.createdItem.smc_Operate||""==this.createdItem.smc_Operate?void this.$notify({title:"提示",message:"请填写模块操作",type:"warning",duration:1500}):null==this.createdItem.smc_URL||""==this.createdItem.smc_URL?void this.$notify({title:"提示",message:"请填写详情地址",type:"warning",duration:1500}):null==this.createdItem.smc_Version||""==this.createdItem.smc_Version?void this.$notify({title:"提示",message:"请填写版本号",type:"warning",duration:1500}):this.createdItem.smc_Notifiedlist.length<1?void this.$notify({title:"提示",message:"请选择被通知人",type:"warning",duration:1500}):null==this.createdItem.smc_State||""==this.createdItem.smc_State?void this.$notify({title:"提示",message:"请选择状态",type:"warning",duration:1500}):(this.formSubmiting=!0,void this.$api.message.messageconfig.update({data:this.createdItem}).then(function(t){"Succees"==t.data.data.Succeed?(e.formSubmiting=!1,e.createForm=!1,e.$notify({title:"成功",message:"保存成功",type:"success",duration:1500}),e.getApplyList()):e.$notify({title:"错误",message:"保存失败",type:"error",duration:3e3})}).catch(function(t){e.formSubmiting=!1,e.$notify({title:"错误",message:t,type:"error",duration:3e3}),console.log(t)}))},getRoleList:function(){var e=this;this.$api.system.role.all({data:this.roleQuery}).then(function(t){e.roleData=t.data.data}).catch(function(e){console.log(e)})},getOperatelist:function(){var e=this;this.createdItem.smc_Operate=null,this.$api.message.operate.operatelist({data:this.roleQuery}).then(function(t){e.operatList=t.data.data.list}).catch(function(e){console.log(e)})},getModelList:function(){var e=this;this.$api.system.menu.modelList({data:this.roleQuery}).then(function(t){e.modelList=t.data.data.list}).catch(function(e){console.log(e)})},rowClick:function(e){this.selectedRow=e},handleCurrentChange:function(e){this.tableQuery.currentPage=e,this.getApplyList()},handleSizeChange:function(e){this.tableQuery.limit=e,this.getApplyList()}},mounted:function(){this.getApplyList(),this.getRoleList(),this.getModelList()},filters:{stateMap:function(e){return{0:"无效",1:"有效"}[e]}}}},913:function(e,t,a){t=e.exports=a(787)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"messageConf.vue",sourceRoot:""}])},930:function(e,t,a){var l=a(913);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(788)("b45c0e3c",l,!0)},956:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-container"},[a("div",{staticClass:"components-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"gray"},on:{click:e.getApplyList}},[a("i",{staticClass:"el-icon-refresh"}),e._v("刷新")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){return e.showInfo("create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("新建")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){return e.showInfo("edit")}}},[a("i",{staticClass:"el-icon-edit"}),e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){return e.deleteConf()}}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){e.queryForm=!0}}},[a("i",{staticClass:"el-icon-search"}),e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.tableLoading,expression:"tableLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中",stripe:"",border:"",fit:"","highlight-current-row":""},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{label:"通知内容",prop:"smc_Content",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联模块",prop:"smc_ModelName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联模块的操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.operatelist,function(t,l){return a("span",{key:l},[e._v("\n                        "+e._s(t)+"\n                    ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"smc_State",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("stateMap")(t.row.smc_State)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"详情地址",prop:"smc_URL",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"被通知人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.notifiedlist,function(t,l){return a("span",{key:l},[a("el-tag",{attrs:{type:"gray"}},[e._v(" "+e._s(t)+" ")])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",prop:"smc_CreateUser",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"smc_CreateTime",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"版本",prop:"smc_Version",align:"center"}})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.tableQuery.currentPage,"page-sizes":[10,20,50],"page-size":e.tableQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.tableQuery,"currentPage",t)},"update:current-page":function(t){return e.$set(e.tableQuery,"currentPage",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查询",visible:e.queryForm},on:{"update:visible":function(t){e.queryForm=t}}},[a("el-form",{staticClass:"small-space",staticStyle:{width:"100%","margin-left":"0px"},attrs:{model:e.tableQuery,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"关联模块"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.modelChange},model:{value:e.tableQuery.smc_Model,callback:function(t){e.$set(e.tableQuery,"smc_Model",t)},expression:"tableQuery.smc_Model"}},e._l(e.modelList,function(e){return a("el-option",{key:e.resource_model,attrs:{label:e.resource_name,value:e.resource_model}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"版本"}},[a("el-input",{attrs:{name:"smc_Version",autoComplete:"on",maxlength:"2"},model:{value:e.tableQuery.smc_Version,callback:function(t){e.$set(e.tableQuery,"smc_Version",t)},expression:"tableQuery.smc_Version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("el-input",{attrs:{name:"smc_CreateUser",autoComplete:"on",maxlength:"50"},model:{value:e.tableQuery.smc_CreateUser,callback:function(t){e.$set(e.tableQuery,"smc_CreateUser",t)},expression:"tableQuery.smc_CreateUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{name:"smc_CreateTimeStart",align:"right","value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"开始时间"},model:{value:e.tableQuery.smc_CreateTimeStart,callback:function(t){e.$set(e.tableQuery,"smc_CreateTimeStart",t)},expression:"tableQuery.smc_CreateTimeStart"}}),e._v(" ---\n                        "),a("el-date-picker",{attrs:{name:"smc_CreateTimeEnd",align:"right","value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"结束时间"},model:{value:e.tableQuery.smc_CreateTimeEnd,callback:function(t){e.$set(e.tableQuery,"smc_CreateTimeEnd",t)},expression:"tableQuery.smc_CreateTimeEnd"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.queryForm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning",loading:e.querySubmiting},on:{click:e.getApplyList}},[e._v("查 询")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"配置编辑",visible:e.createForm},on:{"update:visible":function(t){e.createForm=t}}},[a("el-form",{staticClass:"small-space",staticStyle:{width:"100%","margin-left":"0px"},attrs:{model:e.createdItem,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"通知内容",required:!0}},[a("el-input",{attrs:{name:"smc_Content",autoComplete:"on",maxlength:"200"},model:{value:e.createdItem.smc_Content,callback:function(t){e.$set(e.createdItem,"smc_Content",t)},expression:"createdItem.smc_Content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联模块",required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.modelChange},model:{value:e.createdItem.smc_Model,callback:function(t){e.$set(e.createdItem,"smc_Model",t)},expression:"createdItem.smc_Model"}},e._l(e.modelList,function(e){return a("el-option",{key:e.resource_model,attrs:{label:e.resource_name,value:e.resource_model}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"模块操作",required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.createdItem.smc_Operate,callback:function(t){e.$set(e.createdItem,"smc_Operate",t)},expression:"createdItem.smc_Operate"}},e._l(e.operatList,function(e){return a("el-option",{key:e.operate_id,attrs:{label:e.operate_operate,value:e.operate_id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详情地址",required:!0}},[a("el-input",{attrs:{name:"smc_URL",autoComplete:"on",maxlength:"200"},model:{value:e.createdItem.smc_URL,callback:function(t){e.$set(e.createdItem,"smc_URL",t)},expression:"createdItem.smc_URL"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号",required:!0}},[a("el-input",{attrs:{name:"smc_Version",autoComplete:"on",maxlength:"2"},model:{value:e.createdItem.smc_Version,callback:function(t){e.$set(e.createdItem,"smc_Version",t)},expression:"createdItem.smc_Version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"被通知人",required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择用户角色"},model:{value:e.createdItem.smc_Notifiedlist,callback:function(t){e.$set(e.createdItem,"smc_Notifiedlist",t)},expression:"createdItem.smc_Notifiedlist"}},e._l(e.roleData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.createdItem.smc_State,callback:function(t){e.$set(e.createdItem,"smc_State",t)},expression:"createdItem.smc_State"}},e._l(e.stateArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createForm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning",loading:e.formSubmiting},on:{click:e.saveClassInfo}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=17.11c754fca2bcf95ada7c.js.map
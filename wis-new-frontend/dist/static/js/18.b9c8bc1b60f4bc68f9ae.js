webpackJsonp([18],{807:function(e,t,a){function n(e){a(935)}var s=a(17)(a(885),a(964),n,null,null);e.exports=s.exports},823:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"记录",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"永久删除";return new l.a(function(n,s){i.MessageBox.confirm("此操作将"+t+e+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n()}).catch(function(){a.i(i.Message)({type:"info",message:"已取消此操作"})})})}t.a=n;var s=a(82),l=a.n(s),i=a(111);a.n(i)},885:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(823);t.default={data:function(){return{tableColumShow:!1,tableQuery:{limit:10,currentPage:1,sm_Content:null,sm_YoN:null,sm_CreateTimeStart:null,sm_CreateTimeEnd:null},stateArr:[{value:"Y",label:"已读"},{value:"N",label:"未读"}],querySubmiting:!1,queryForm:!1,total:0,tableData:[],tableLoading:!1,read:{sm_Code:null}}},methods:{lookOver:function(e,t,a){this.markRead(e,"N",!1);var n=t.indexOf("/"),s=t.slice(0,n),l="/"+s+"/"+t;this.$router.push({path:l.substr(0,l.length-4),query:{bussinessCode:a}})},getApplyList:function(){var e=this;if(this.tableQuery.sm_CreateTimeStart>this.tableQuery.sm_CreateTimeEnd)return void this.$notify({title:"提示",message:"开始时间不能晚于结束时间！",type:"warning",duration:2e3});this.tableLoading=!0,this.$api.message.message.list({data:this.tableQuery}).then(function(t){e.total=t.data.data.total,e.tableData=t.data.data.list,e.queryForm=!1,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1,console.log(t)})},markRead:function(e,t,a){var n=this;this.read.sm_Code=e,"N"==t?this.$api.message.message.read({data:this.read}).then(function(e){var t=e.data.data.Succeed;a&&("Succees"==t?(n.getApplyList(),n.$notify({title:"提示",message:"修改成功！",type:"success",duration:2e3})):n.$notify({title:"提示",message:"修改失败！",type:"error",duration:2e3}))}).catch(function(e){a&&n.$notify({title:"提示",message:"修改失败！",type:"error",duration:2e3})}):"Y"==t&&this.$api.message.message.unread({data:this.read}).then(function(e){"Succees"==e.data.data.Succeed?(n.getApplyList(),n.$notify({title:"提示",message:"修改成功！",type:"success",duration:2e3})):n.$notify({title:"提示",message:"修改失败！",type:"error",duration:2e3})}).catch(function(e){n.$notify({title:"提示",message:"修改失败！",type:"error",duration:2e3})})},handleCurrentChange:function(e){this.tableQuery.currentPage=e,this.getApplyList()},handleSizeChange:function(e){this.tableQuery.limit=e,this.getApplyList()}},mounted:function(){this.getApplyList()}}},918:function(e,t,a){t=e.exports=a(787)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"message.vue",sourceRoot:""}])},935:function(e,t,a){var n=a(918);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(788)("4fa5a371",n,!0)},964:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"gray"},on:{click:e.getApplyList}},[a("i",{staticClass:"el-icon-refresh"}),e._v("刷新")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){e.queryForm=!0}}},[a("i",{staticClass:"el-icon-search"}),e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.tableLoading,expression:"tableLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中",stripe:"",border:"",fit:"","highlight-current-row":""}},[e.tableColumShow?a("el-table-column",{attrs:{label:"通知详情",prop:"sm_URL",align:"center",sortable:""}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"通知内容",prop:"sm_Content",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"通知日期",prop:"sm_CreateTime",align:"center",width:"250px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){return e.lookOver(t.row.sm_Code,t.row.sm_URL,t.row.sm_BussinessCode)}}},[a("i",{staticClass:"el-icon-tickets"}),e._v(" 查看")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){return e.markRead(t.row.sm_Code,t.row.sm_YoN,!0)}}},["N"==t.row.sm_YoN?a("i",{staticClass:"el-icon-circle-check"},[e._v("标为已读")]):"Y"==t.row.sm_YoN?a("i",{staticClass:"el-icon-circle-close"},[e._v("标为未读")]):e._e()])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.tableQuery.currentPage,"page-sizes":[10,20,50],"page-size":e.tableQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.tableQuery,"currentPage",t)},"update:current-page":function(t){return e.$set(e.tableQuery,"currentPage",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查询",visible:e.queryForm},on:{"update:visible":function(t){e.queryForm=t}}},[a("el-form",{staticClass:"small-space",staticStyle:{width:"100%","margin-left":"0px"},attrs:{model:e.tableQuery,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"通知内容"}},[a("el-input",{attrs:{name:"RA_Code",autoComplete:"on",maxlength:"200"},model:{value:e.tableQuery.sm_Content,callback:function(t){e.$set(e.tableQuery,"sm_Content",t)},expression:"tableQuery.sm_Content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否已读"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tableQuery.sm_YoN,callback:function(t){e.$set(e.tableQuery,"sm_YoN",t)},expression:"tableQuery.sm_YoN"}},e._l(e.stateArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通知日期"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{name:"RA_CreateTimeStart",align:"right","value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"开始时间"},model:{value:e.tableQuery.sm_CreateTimeStart,callback:function(t){e.$set(e.tableQuery,"sm_CreateTimeStart",t)},expression:"tableQuery.sm_CreateTimeStart"}}),e._v(" ---\n                    "),a("el-date-picker",{attrs:{name:"RA_CreateTimeEnd",align:"right","value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"结束时间"},model:{value:e.tableQuery.sm_CreateTimeEnd,callback:function(t){e.$set(e.tableQuery,"sm_CreateTimeEnd",t)},expression:"tableQuery.sm_CreateTimeEnd"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.queryForm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning",loading:e.querySubmiting},on:{click:e.getApplyList}},[e._v("查 询")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=18.b9c8bc1b60f4bc68f9ae.js.map
webpackJsonp([23],{796:function(e,t,a){function l(e){a(943)}var s=a(17)(a(874),a(979),l,null,null);e.exports=s.exports},823:function(e,t,a){"use strict";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"记录",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"永久删除";return new i.a(function(l,s){r.MessageBox.confirm("此操作将"+t+e+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l()}).catch(function(){a.i(r.Message)({type:"info",message:"已取消此操作"})})})}t.a=l;var s=a(82),i=a.n(s),r=a(111);a.n(r)},874:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(301),s=a.n(l),i=(a(112),a(823));t.default={data:function(){return{stateArr:[{value:"0",label:"无效"},{value:"1",label:"有效"}],querySubmiting:!1,formSubmiting:!1,queryForm:!1,total:0,tableData:[],tableLoading:!1,createForm:!1,selectedRow:null,tableQuery:{limit:10,currentPage:1,spc_CreateUser:null,spc_State:null,spc_Model:null,spc_Version:null,spc_CreateTimeStart:null,spc_CreateTimeEnd:null},createdItem:{spc_Code:null,spc_State:null,spc_Model:null,spc_Version:null,spc_Step:null,spc_Rolelist:[]},roleQuery:{limit:1e3,currentPage:1},roleData:null,modelList:null}},methods:{getApplyList:function(){var e=this;this.selectedRow=null,this.tableLoading=!0,this.$api.audit.auditConf.list({data:this.tableQuery}).then(function(t){e.total=t.data.data.total,e.tableData=t.data.data.list,e.queryForm=!1,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1,console.log(t)})},deleteConf:function(){var e=this;if(null==this.selectedRow)return void this.$notify({title:"提示",message:"请选择一条数据！",type:"warning",duration:2e3});a.i(i.a)("此配置").then(function(){e.$api.audit.auditConf.delete({data:e.selectedRow}).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:1500}),e.getApplyList(),e.selectedRow=null}).catch(function(t){e.formSubmiting=!1,e.$notify({title:"错误",message:t,type:"error",duration:3e3}),console.log(t)})})},saveClassInfo:function(){var e=this;return null==this.createdItem.spc_Model||""==this.createdItem.spc_Model?void this.$notify({title:"提示",message:"请填选择流程模块",type:"warning",duration:1500}):null==this.createdItem.spc_Version||""==this.createdItem.spc_Version?void this.$notify({title:"提示",message:"请填写版本号",type:"warning",duration:1500}):null==this.createdItem.spc_Step||""==this.createdItem.spc_Step?void this.$notify({title:"提示",message:"请填写步骤编号",type:"warning",duration:1500}):this.createdItem.spc_Rolelist.length<1?void this.$notify({title:"提示",message:"请填选择配置角色",type:"warning",duration:1500}):null==this.createdItem.spc_State||""==this.createdItem.spc_State?void this.$notify({title:"提示",message:"请填选择状态",type:"warning",duration:1500}):(this.formSubmiting=!0,void this.$api.audit.auditConf.update({data:this.createdItem}).then(function(t){"Succees"==t.data.data.Succeed?(e.formSubmiting=!1,e.createForm=!1,e.$notify({title:"成功",message:"保存成功",type:"success",duration:1500}),e.getApplyList()):e.$notify({title:"错误",message:"保存失败",type:"error",duration:3e3})}).catch(function(t){e.formSubmiting=!1,e.$notify({title:"错误",message:t,type:"error",duration:3e3}),console.log(t)}))},showInfo:function(e){"edit"==e?null==this.selectedRow?this.$notify({title:"提示",message:"请选择一条数据！",type:"warning",duration:2e3}):(this.createdItem.spc_Code=this.selectedRow.spc_Code,this.createdItem.spc_State=this.selectedRow.spc_State,this.createdItem.spc_Model=this.selectedRow.spc_Model,this.createdItem.spc_Version=this.selectedRow.spc_Version,this.createdItem.spc_Step=this.selectedRow.spc_Step,this.createdItem.spc_Rolelist=s()(this.selectedRow.rolelist).map(function(e){return parseInt(e)}),this.createForm=!0):"create"==e&&(this.clearEditDialog(),this.createForm=!0)},clearEditDialog:function(){this.createdItem.spc_Code=null,this.createdItem.spc_State=null,this.createdItem.spc_Model=null,this.createdItem.spc_Version=null,this.createdItem.spc_Step=null,this.createdItem.spc_Rolelist=[]},getRoleList:function(){var e=this;this.$api.system.role.all({data:this.roleQuery}).then(function(t){e.roleData=t.data.data}).catch(function(e){console.log(e)})},getModelList:function(){var e=this;this.$api.system.menu.modelList({data:this.roleQuery}).then(function(t){e.modelList=t.data.data.list}).catch(function(e){console.log(e)})},rowClick:function(e){this.selectedRow=e},handleCurrentChange:function(e){this.tableQuery.currentPage=e,this.getApplyList()},handleSizeChange:function(e){this.tableQuery.limit=e,this.getApplyList()}},mounted:function(){this.getApplyList(),this.getRoleList(),this.getModelList()},filters:{stateMap:function(e){return{0:"无效",1:"有效"}[e]}}}},926:function(e,t,a){t=e.exports=a(787)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"auditConf.vue",sourceRoot:""}])},943:function(e,t,a){var l=a(926);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(788)("f12adede",l,!0)},979:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-container"},[a("div",{staticClass:"components-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"gray"},on:{click:e.getApplyList}},[a("i",{staticClass:"el-icon-refresh"}),e._v("刷新")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){return e.showInfo("create")}}},[a("i",{staticClass:"el-icon-plus"}),e._v("新建")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){return e.showInfo("edit")}}},[a("i",{staticClass:"el-icon-edit"}),e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){return e.deleteConf()}}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"gray"},on:{click:function(t){e.queryForm=!0}}},[a("i",{staticClass:"el-icon-search"}),e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.tableLoading,expression:"tableLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中",stripe:"",border:"",fit:"","highlight-current-row":""},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{label:"流程模块",prop:"spc_ModelName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"版本号",prop:"spc_Version",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"步骤编号",prop:"spc_Step",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"spc_State",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("stateMap")(t.row.spc_State)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"配置角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rolelist,function(t,l){return a("span",{key:l},[a("el-tag",{attrs:{type:"gray"}},[e._v(" "+e._s(t)+" ")])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",prop:"spc_CreateUser",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"spc_CreateTime",align:"center",sortable:""}})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.tableQuery.currentPage,"page-sizes":[10,20,50],"page-size":e.tableQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.tableQuery,"currentPage",t)},"update:current-page":function(t){return e.$set(e.tableQuery,"currentPage",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查询",visible:e.queryForm},on:{"update:visible":function(t){e.queryForm=t}}},[a("el-form",{staticClass:"small-space",staticStyle:{width:"100%","margin-left":"0px"},attrs:{model:e.tableQuery,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"流程模块"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程模块"},model:{value:e.tableQuery.spc_Model,callback:function(t){e.$set(e.tableQuery,"spc_Model",t)},expression:"tableQuery.spc_Model"}},e._l(e.modelList,function(e){return a("el-option",{key:e.resource_model,attrs:{label:e.resource_name,value:e.resource_model}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号"}},[a("el-input",{attrs:{name:"spc_Version",autoComplete:"on",maxlength:"2"},model:{value:e.tableQuery.spc_Version,callback:function(t){e.$set(e.tableQuery,"spc_Version",t)},expression:"tableQuery.spc_Version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tableQuery.spc_State,callback:function(t){e.$set(e.tableQuery,"spc_State",t)},expression:"tableQuery.spc_State"}},e._l(e.stateArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("el-input",{attrs:{name:"spc_CreateUser",autoComplete:"on",maxlength:"50"},model:{value:e.tableQuery.spc_CreateUser,callback:function(t){e.$set(e.tableQuery,"spc_CreateUser",t)},expression:"tableQuery.spc_CreateUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{name:"spc_CreateTimeStart",align:"right","value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"开始时间"},model:{value:e.tableQuery.spc_CreateTimeStart,callback:function(t){e.$set(e.tableQuery,"spc_CreateTimeStart",t)},expression:"tableQuery.spc_CreateTimeStart"}}),e._v(" ---\n                        "),a("el-date-picker",{attrs:{name:"spc_CreateTimeEnd",align:"right","value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"结束时间"},model:{value:e.tableQuery.spc_CreateTimeEnd,callback:function(t){e.$set(e.tableQuery,"spc_CreateTimeEnd",t)},expression:"tableQuery.spc_CreateTimeEnd"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.queryForm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning",loading:e.querySubmiting},on:{click:e.getApplyList}},[e._v("查 询")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"配置编辑",visible:e.createForm},on:{"update:visible":function(t){e.createForm=t}}},[a("el-form",{staticClass:"small-space",staticStyle:{width:"100%","margin-left":"0px"},attrs:{model:e.createdItem,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"流程模块",required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择流程模块"},model:{value:e.createdItem.spc_Model,callback:function(t){e.$set(e.createdItem,"spc_Model",t)},expression:"createdItem.spc_Model"}},e._l(e.modelList,function(e){return a("el-option",{key:e.resource_model,attrs:{label:e.resource_name,value:e.resource_model}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号",required:!0}},[a("el-input",{attrs:{name:"spc_Version",autoComplete:"on",maxlength:"2"},model:{value:e.createdItem.spc_Version,callback:function(t){e.$set(e.createdItem,"spc_Version",t)},expression:"createdItem.spc_Version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"步骤编号",required:!0}},[a("el-input",{attrs:{name:"spc_Step",autoComplete:"on",maxlength:"2"},model:{value:e.createdItem.spc_Step,callback:function(t){e.$set(e.createdItem,"spc_Step",t)},expression:"createdItem.spc_Step"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配置角色",required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择用户角色"},model:{value:e.createdItem.spc_Rolelist,callback:function(t){e.$set(e.createdItem,"spc_Rolelist",t)},expression:"createdItem.spc_Rolelist"}},e._l(e.roleData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.createdItem.spc_State,callback:function(t){e.$set(e.createdItem,"spc_State",t)},expression:"createdItem.spc_State"}},e._l(e.stateArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createForm=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning",loading:e.formSubmiting},on:{click:e.saveClassInfo}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=23.4894dd2fa7eb78168850.js.map